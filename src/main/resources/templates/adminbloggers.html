<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
      lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head th:replace="header :: common-header"></head>

<body>
<div class="container">
    <div th:replace="header :: header-script"></div>
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link " th:href="@{/login/admin}">All Blogs</a>
        </li>
        <li class="nav-item">
            <a class="nav-link " th:href="@{/login/admin/pendingblog}">Pending Blog</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:href="@{/login/admin/pendingblogger}">Pending Blogger</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" th:href="@{/login/admin/allblogger}">All Blogger</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:href="@{/login/admin/add}">Add Admin</a>
        </li>
    </ul>
    <div class="row" style="margin: 25px">
        <table class="table">
            <thead>
            <tr>
                <th scope="col">No</th>
                <th scope="col">Name</th>
                <th scope="col">Email</th>
                <th scope="col">Phone</th>
                <th scope="col">Status</th>
                <th scope="col">Delete</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td scope="row" id="number"></td>
                <td scope="row" id="name"></td>
                <td scope="row" id="email"></td>
                <td scope="row" id="phone"></td>
                <td scope="row" id="status"></td>
                <td scope="row" id="delete"></td>
            </tr>
        </table>
    </div>
    <div th:replace="header :: body-bottom-scripts"></div>
    <script>
        $(document).ready(function () {
            let number = $("#number").val().trim();
            let name = $("#name").val().trim();
            let email = $("#email").val().trim();
            let phone = $("#phone").val().trim();
            let status = $("#status").val().trim();

            const cookieValue = document.cookie.split('; ').find(row => row.startsWith('token')).split('=')[1];
            $.ajax({
                url: 'http://localhost:8080/api/v1/user',
                method: 'GET',
                headers: {
                    "Content-Type": "application/json",
                    "Accept": "application/json",
                    "Authorization": cookieValue.toString()
                },
                data: {},
                success: function (response) {
                    if (response) {
                        console.log(response)
                        alert("Get User Successful.");
                    }
                },
                error: function (e) {
                    console.log(JSON.stringify(e));
                    alert(e.message())
                }
            });
        });
    </script>
</div>
</body>
</html>